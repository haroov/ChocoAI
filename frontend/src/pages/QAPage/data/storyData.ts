export type Lane = 'User' | 'Agent' | 'Flow' | 'API' | 'Data';

export interface Step {
  id: number;
  lane: Lane;
  title: string;
  description: string;
  details?: string;
}

export interface StoryData {
  id: string;
  name: string;
  background: string;
  steps: Step[];
  initialPrompt: string;
}

/* eslint-disable max-len */
export const STORIES: StoryData[] = [
  {
    id: '1',
    name: 'Story 1: New Israeli Nonprofit',
    background: 'New user in Israel. Flow: Welcome → Sign-Up → OTP Details (Phone/Email) → KYC → Create Org/Entity/Gateway → Campaign Mgmt.',
    initialPrompt: 'I want to start a fundraising campaign for a new Israeli nonprofit.',
    steps: [
      { id: 1, lane: 'User', title: 'Start conversation', description: '"I want to start a fundraising campaign..."' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Is this New Registration or Login?' },
      { id: 3, lane: 'Data', title: 'Update Context', description: 'intent_confirmed: true' },
      { id: 4, lane: 'Flow', title: 'sign-up.intent', description: 'DECIDE: Donor or Nonprofit Role?' },
      { id: 5, lane: 'Data', title: 'Update Context', description: 'role: "nonprofit"' },
      { id: 6, lane: 'Flow', title: 'sign-up.collectNonprofitProfile', description: 'START: Collect Org Profile (Loop)' },
      { id: 7, lane: 'Agent', title: 'Request Org Name', description: '"What is the name of your organization?"' },
      { id: 8, lane: 'User', title: 'Provide Org Name', description: '"Hope for Israel"' },
      { id: 9, lane: 'Data', title: 'Update Context', description: 'organization_name: "Hope for Israel"' },
      { id: 10, lane: 'Agent', title: 'Request Name', description: '"What is your full name?"' },
      { id: 11, lane: 'User', title: 'Provide Name', description: '"Yossi Levi"' },
      { id: 12, lane: 'Data', title: 'Update Context', description: 'first_name: "Yossi", last_name: "Levi"' },
      { id: 13, lane: 'Agent', title: 'Request Email', description: '"What is your email address?"' },
      { id: 14, lane: 'User', title: 'Provide Email', description: '"yossi@hope.org"' },
      { id: 15, lane: 'Data', title: 'Update Context', description: 'email: "yossi@hope.org"' },
      { id: 16, lane: 'Agent', title: 'Request Phone', description: '"What is your mobile number?"' },
      { id: 17, lane: 'User', title: 'Provide Phone', description: '"0501234567"' },
      { id: 18, lane: 'Data', title: 'Update Context', description: 'phone: "0501234567"' },
      { id: 19, lane: 'Flow', title: 'sign-up.signupNonprofit', description: 'EXECUTE: Create User Record' },
      { id: 20, lane: 'API', title: 'choco.signup', description: 'POST /signup (Create Account)' },
      { id: 21, lane: 'Flow', title: 'sign-up.verifyPhoneOrEmail', description: 'START: OTP Verification' },
      { id: 22, lane: 'API', title: 'Login OTP', description: 'POST /login-otp (Send Code)' },
      { id: 23, lane: 'Agent', title: 'Request Code', description: '"Please enter the code sent to you"' },
      { id: 24, lane: 'User', title: 'Enter Code', description: '"123456"' },
      { id: 25, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code (Check OTP)' },
      { id: 26, lane: 'Flow', title: 'sign-up.signUpSuccess', description: 'STATE: Registration Complete' },
      { id: 27, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'START: KYC Process' },
      { id: 28, lane: 'Data', title: 'Update Context', description: 'has_multiple_orgs: false' },
      { id: 29, lane: 'Flow', title: 'kyc.kycCampaignWarmup', description: 'ENGAGE: Warmup Conversation' },
      { id: 30, lane: 'Agent', title: 'Campaign Brief', description: '"Tell me briefly about your campaign?"' },
      { id: 31, lane: 'User', title: 'Provide Brief', description: '"Fundraising for a new community center"' },
      { id: 32, lane: 'Data', title: 'Update Context', description: 'campaign_brief: "Fundraising for..."' },
      { id: 33, lane: 'Flow', title: 'kyc.kycGatewayIntroduction', description: 'INTRO: Explain Gateway Setup' },
      { id: 34, lane: 'Flow', title: 'kyc.kycLoadEntities', description: 'FETCH: Existing Legal Entities' },
      { id: 35, lane: 'API', title: 'kyc.loadOrgEntities', description: 'GET /orgs/:id/entities' },
      { id: 36, lane: 'Data', title: 'Update Context', description: 'has_entities: false' },
      { id: 37, lane: 'Flow', title: 'kyc.kycEntityDecision', description: 'DECIDE: New Entity needed?' },
      { id: 38, lane: 'Flow', title: 'kyc.kycSelectReceivingEntity', description: 'ASK: Who receives funds?' },
      { id: 39, lane: 'Agent', title: 'Who Receives?', description: '"Who should receive funds?"' },
      { id: 40, lane: 'User', title: 'Select New', description: '"New Legal Entity"' },
      { id: 41, lane: 'Data', title: 'Update Context', description: 'entity_type: "OTHER_ENTITY"' },
      { id: 42, lane: 'Flow', title: 'kyc.kycCreateEntityStart', description: 'START: Create New Entity' },
      { id: 43, lane: 'Agent', title: 'Request Info', description: '"What is the name and country?"' },
      { id: 44, lane: 'User', title: 'Provide Info', description: '"Hope Center, Israel"' },
      { id: 45, lane: 'Data', title: 'Update Context', description: 'entity_name: "Hope Center", entity_country: "IL"' },
      { id: 46, lane: 'Flow', title: 'kyc.kycCreateEntityTaxId', description: 'ASK: Tax ID / Amuta Num' },
      { id: 47, lane: 'Agent', title: 'Request ID', description: '"What is the Amuta Number?"' },
      { id: 48, lane: 'User', title: 'Provide ID', description: '"580123456"' },
      { id: 49, lane: 'API', title: 'nonprofit.lookup', description: 'GET /lookup (Enrich Data)' },
      { id: 50, lane: 'Data', title: 'Enrich Data', description: 'Address/Status Loaded' },
      { id: 51, lane: 'Flow', title: 'kyc.kycCreateEntityConfirm', description: 'CONFIRM: Verify Details' },
      { id: 52, lane: 'Agent', title: 'Confirm', description: '"Are these details correct?"' },
      { id: 53, lane: 'User', title: 'Confirm', description: '"Confirmed"' },
      { id: 54, lane: 'Flow', title: 'kyc.kycCreateEntityFinalize', description: 'BUILD: Construct Entity Object' },
      { id: 55, lane: 'API', title: 'kyc.buildEntity', description: 'Construct Object' },
      { id: 56, lane: 'API', title: 'kyc.pushEntity', description: 'POST /entities (Save)' },
      { id: 57, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'MATCH: Find Provider' },
      { id: 58, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'Match: Grow (Meshulam)' },
      { id: 59, lane: 'Flow', title: 'kyc.kycMeshulamPhone', description: 'ASK: Local IL Phone' },
      { id: 60, lane: 'Agent', title: 'Request Phone', description: '"Need local IL phone"' },
      { id: 61, lane: 'User', title: 'Provide Phone', description: '"0501234567"' },
      { id: 62, lane: 'Flow', title: 'kyc.kycGatewayLink', description: 'PROVIDE: Setup Link' },
      { id: 63, lane: 'Agent', title: 'Link', description: '"Here is your setup link. Type \'done\' when finished."' },
      { id: 64, lane: 'User', title: 'Acknowledge', description: '"Done"' },
      { id: 65, lane: 'Data', title: 'Update Context', description: 'gateway_setup_ack: true' },
      { id: 66, lane: 'Flow', title: 'CampaignMgmt', description: 'TRANSITION: Dashboard' },
    ],
  },
  {
    id: '2',
    name: 'Story 2: Forgot Account (US)',
    background: 'US user with existing account but tries to register. Flow: Signup Intent -> Error -> Handoff to Login -> Context Load.',
    initialPrompt: 'I want to start a campaign but I might already be registered.',
    steps: [
      { id: 1, lane: 'User', title: 'Start conversation', description: '"I want to start a campaign but might represent..."' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Is this New Registration or Login?' },
      { id: 3, lane: 'Data', title: 'Update Context', description: 'intent_confirmed: true' },
      { id: 4, lane: 'Flow', title: 'sign-up.intent', description: 'DECIDE: Donor or Nonprofit?' },
      { id: 5, lane: 'Data', title: 'Update Context', description: 'role: "nonprofit"' },
      { id: 6, lane: 'Flow', title: 'sign-up.collectNonprofitProfile', description: 'START: Collect Org Profile' },
      { id: 7, lane: 'Agent', title: 'Request Info', description: '"What is the name of your organization?"' },
      { id: 8, lane: 'User', title: 'Provide Existing', description: '"Existing Org Name" (Trigger Lookup)' },
      { id: 9, lane: 'Data', title: 'Update Context', description: 'already_registered: true (Inferred)' },
      { id: 10, lane: 'Flow', title: 'sign-up.handoffToLogin', description: 'SWITCH: Transition to Login' },
      { id: 11, lane: 'Flow', title: 'login.bootstrapAutoFillIdentifier', description: 'CHECK: Auto-fill capability' },
      { id: 12, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 13, lane: 'Agent', title: 'Request Email', description: '"Please enter your email to login"' },
      { id: 14, lane: 'User', title: 'Provide Email', description: '"manager@existing.org"' },
      { id: 15, lane: 'Data', title: 'Update Context', description: 'login_identifier: "manager@existing.org"' },
      { id: 16, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 17, lane: 'API', title: 'choco.login-otp', description: 'POST /login-otp' },
      { id: 18, lane: 'Agent', title: 'Request Code', description: '"Enter the code sent to your email"' },
      { id: 19, lane: 'User', title: 'Enter Code', description: '"123456"' },
      { id: 20, lane: 'Data', title: 'Update Context', description: 'verification_code: "123456"' },
      { id: 21, lane: 'Flow', title: 'login.verifyLoginCode', description: 'VERIFY: Check OTP' },
      { id: 22, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code' },
      { id: 23, lane: 'Flow', title: 'login.completeLogin', description: 'FETCH: User Record' },
      { id: 24, lane: 'API', title: 'choco.login-complete', description: 'GET /users/me' },
      { id: 25, lane: 'Flow', title: 'login.linkUserData', description: 'MERGE: Link Data to Session' },
      { id: 26, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Orgs/Entities/Gateways' },
      { id: 27, lane: 'API', title: 'login.checkAccountContext', description: 'GET /account-context-status' },
      { id: 28, lane: 'Data', title: 'Update Context', description: 'kyc_completed: true' },
      { id: 29, lane: 'Flow', title: 'login.routeAfterLogin', description: 'DECIDE: Route to Dashboard' },
      { id: 30, lane: 'Flow', title: 'campaignManagement.bootstrap', description: 'TRANSITION: Campaign Mgmt' },
    ],
  },
  {
    id: '3',
    name: 'Story 3: Returning Nonprofit Manager (Complete)',
    background: 'Existing nonprofit manager. Flow: Login → Context Pull → Skip KYC → Campaign Mgmt.',
    initialPrompt: 'I need to access my existing campaign dashboard.',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"I need to access my existing campaign dashboard."' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Is this New Registration or Login?' },
      { id: 3, lane: 'Data', title: 'Update Context', description: 'intent_type: "login"' },
      { id: 4, lane: 'Flow', title: 'login.bootstrapAutoFillIdentifier', description: 'CHECK: Auto-fill capability' },
      { id: 5, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 6, lane: 'Agent', title: 'Request Phone', description: '"Please enter your phone number."' },
      { id: 7, lane: 'User', title: 'Provide Phone', description: '"0509876543"' },
      { id: 8, lane: 'Data', title: 'Update Context', description: 'login_identifier: "0509876543"' },
      { id: 9, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 10, lane: 'API', title: 'choco.login-otp', description: 'POST /login-otp' },
      { id: 11, lane: 'Agent', title: 'Request Code', description: '"Enter the code sent to 0509876543"' },
      { id: 12, lane: 'User', title: 'Verify OTP', description: '"112233"' },
      { id: 13, lane: 'Data', title: 'Update Context', description: 'verification_code: "112233"' },
      { id: 14, lane: 'Flow', title: 'login.verifyLoginCode', description: 'VERIFY: Check OTP' },
      { id: 15, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code (Success)' },
      { id: 16, lane: 'Flow', title: 'login.completeLogin', description: 'FETCH: User Record' },
      { id: 17, lane: 'API', title: 'choco.login-complete', description: 'GET /users/me' },
      { id: 18, lane: 'Flow', title: 'login.linkUserData', description: 'MERGE: Link Data to Session' },
      { id: 19, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Orgs/Entities/Gateways' },
      { id: 20, lane: 'API', title: 'login.checkAccountContext', description: 'GET /account-context-status' },
      { id: 21, lane: 'Data', title: 'Update Context', description: 'has_entities: true, has_existing_gateway: true' },
      { id: 22, lane: 'Flow', title: 'login.routeAfterLogin', description: 'DECIDE: Route to Dashboard' },
      { id: 23, lane: 'Flow', title: 'campaignManagement.bootstrap', description: 'TRANSITION: Campaign Mgmt' },
      { id: 24, lane: 'Flow', title: 'campaignManagement.dashboard', description: 'SHOW: Dashboard' },
    ],
  },
  {
    id: '4',
    name: 'Story 4: No Gateway',
    background: 'Existing manager, has Entity but no Gateway. Flow: Login → Context Pull → Fast-path to Gateway Setup.',
    initialPrompt: 'I logged in but I need to finish setting up payments.',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"I want to finish my setup"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Is this New Registration or Login?' },
      { id: 3, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 4, lane: 'Agent', title: 'Request Info', description: '"Please enter your email or phone"' },
      { id: 5, lane: 'User', title: 'Provide Info', description: '"manager@noprofit.org"' },
      { id: 6, lane: 'Data', title: 'Update Context', description: 'login_identifier: "manager@noprofit.org"' },
      { id: 7, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 8, lane: 'API', title: 'choco.login-otp', description: 'POST /login-otp' },
      { id: 9, lane: 'User', title: 'Enter OTP', description: '"654321"' },
      { id: 10, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code' },
      { id: 11, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Orgs/Entities/Gateways' },
      { id: 12, lane: 'API', title: 'login.checkAccountContext', description: 'GET /account-context-status' },
      { id: 13, lane: 'Data', title: 'Update Context', description: 'has_entities: true, has_existing_gateway: false' },
      { id: 14, lane: 'Flow', title: 'login.routeAfterLogin', description: 'DECIDE: Route to KYC (Incomplete)' },
      { id: 15, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'RESUME: KYC Process' },
      { id: 16, lane: 'Flow', title: 'kyc.kycGatewayIntroduction', description: 'INTRO: Gateway Setup' },
      { id: 17, lane: 'Flow', title: 'kyc.kycLoadEntities', description: 'FETCH: Entities' },
      { id: 18, lane: 'API', title: 'kyc.loadOrgEntities', description: 'GET /orgs/:id/entities' },
      { id: 19, lane: 'Flow', title: 'kyc.kycEntityDecision', description: 'DECIDE: Select Entity' },
      { id: 20, lane: 'Flow', title: 'kyc.kycSelectEntity', description: 'ASK: Which Entity?' },
      { id: 21, lane: 'Agent', title: 'Entity List', description: '"Select entity to attach gateway"' },
      { id: 22, lane: 'User', title: 'Select Entity', description: '"MyCharity Inc."' },
      { id: 23, lane: 'Data', title: 'Update Context', description: 'entity_selection: "MyCharity Inc."' },
      { id: 24, lane: 'Flow', title: 'kyc.kycProcessEntitySelection', description: 'RESOLVE: Entity ID' },
      { id: 25, lane: 'API', title: 'kyc.resolveEntitySelection', description: 'Identify target entity' },
      { id: 26, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'MATCH: Find Provider' },
      { id: 27, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'Match: Stripe' },
      { id: 28, lane: 'Flow', title: 'kyc.kycGatewayLink', description: 'PROVIDE: Setup Link' },
      { id: 29, lane: 'Agent', title: 'Setup Link', description: '"Here is your Stripe setup link"' },
      { id: 30, lane: 'User', title: 'Acknowledge', description: '"Done"' },
      { id: 31, lane: 'Flow', title: 'kyc.kycComplete', description: 'STATE: KYC Complete' },
      { id: 32, lane: 'Flow', title: 'campaignManagement.bootstrap', description: 'TRANSITION: Campaign Mgmt' },
    ],
  },
  {
    id: '5',
    name: 'Story 5: Multi-Org Manager',
    background: 'User with multiple orgs. Flow: Login → Force Org Selection → Lock Context → Scope Entity/Gateway actions to selected org.',
    initialPrompt: 'I manage multiple charities, I need to setup a new one.',
    steps: [
      { id: 1, lane: 'User', title: 'Start conversation', description: '"I manage multiple charities..."' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: New Registration or Login?' },
      { id: 3, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 4, lane: 'Agent', title: 'Request Info', description: '"Enter phone/email"' },
      { id: 5, lane: 'User', title: 'Provide Info', description: '"super_admin@network.org"' },
      { id: 6, lane: 'Data', title: 'Update Context', description: 'login_identifier: "super_admin@network.org"' },
      { id: 7, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 8, lane: 'API', title: 'choco.login-otp', description: 'POST /login-otp' },
      { id: 9, lane: 'User', title: 'Enter OTP', description: '"998877"' },
      { id: 10, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code' },
      { id: 11, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Orgs/Entities/Gateways' },
      { id: 12, lane: 'API', title: 'login.checkAccountContext', description: 'Found 3 Orgs' },
      { id: 13, lane: 'Data', title: 'Update Context', description: 'has_multiple_orgs: true' },
      { id: 14, lane: 'Flow', title: 'login.routeAfterLogin', description: 'DECIDE: Route to KYC' },
      { id: 15, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'START: KYC Process' },
      { id: 16, lane: 'Flow', title: 'kyc.kycCampaignWarmup', description: 'ENGAGE: Warmup Conversation' },
      { id: 17, lane: 'Agent', title: 'Warmup', description: '"Let\'s set up. What is the campaign for?"' },
      { id: 18, lane: 'User', title: 'Respond', description: '"Charity B Annual Drive"' },
      { id: 19, lane: 'Flow', title: 'kyc.kycGatewayIntroduction', description: 'CHECK: Needs Org Selection' },
      { id: 20, lane: 'Flow', title: 'kyc.kycSelectOrganization', description: 'ASK: Which Organization?' },
      { id: 21, lane: 'Agent', title: 'Select Org', description: '"Which org are we setting up?" (Lists 3)' },
      { id: 22, lane: 'User', title: 'Choose Org', description: '"Charity B"' },
      { id: 23, lane: 'Data', title: 'Update Context', description: 'org_selection: "Charity B"' },
      { id: 24, lane: 'Flow', title: 'kyc.kycLoadEntities', description: 'FETCH: Entities for Charity B' },
      { id: 25, lane: 'API', title: 'kyc.loadOrgEntities', description: 'GET /orgs/charity-b/entities' },
      { id: 26, lane: 'Flow', title: 'kyc.kycEntityDecision', description: 'DECIDE: Proceed to Entity' },
    ],
  },
  {
    id: '6',
    name: 'Story 6: Donor -> Nonprofit',
    background: 'Donor converting to Nonprofit. Flow: Login → Recognize no Nonprofit context → Create Org/Entity/Gateway.',
    initialPrompt: 'I am a donor but now I want to raise money.',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"I want to log in"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Is this New Registration or Login?' },
      { id: 3, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 4, lane: 'Agent', title: 'Request Info', description: '"Please enter your email or phone"' },
      { id: 5, lane: 'User', title: 'Provide Info', description: '"donor@mail.com"' },
      { id: 6, lane: 'Data', title: 'Update Context', description: 'login_identifier: "donor@mail.com"' },
      { id: 7, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 8, lane: 'API', title: 'choco.login-otp', description: 'POST /login-otp' },
      { id: 9, lane: 'User', title: 'Enter OTP', description: '"123456"' },
      { id: 10, lane: 'API', title: 'choco.verify-code', description: 'POST /verify-code' },
      { id: 11, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Orgs/Entities/Gateways' },
      { id: 12, lane: 'API', title: 'login.checkAccountContext', description: 'GET /status (Role: Donor, No Org)' },
      { id: 13, lane: 'Data', title: 'Update Context', description: 'has_entities: false' },
      { id: 14, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: Re-Analyze Intent (Switch Role)' },
      { id: 15, lane: 'Flow', title: 'sign-up.intent', description: 'START: Nonprofit Signup Flow' },
      { id: 16, lane: 'Data', title: 'Update Context', description: 'role: "nonprofit"' },
      { id: 17, lane: 'Flow', title: 'sign-up.collectNonprofitProfile', description: 'START: Collect Org Details' },
      { id: 18, lane: 'Agent', title: 'Request Org Name', description: '"Name of your organization?"' },
      { id: 19, lane: 'User', title: 'Provide Name', description: '"My New Charity"' },
      { id: 20, lane: 'Data', title: 'Update Context', description: 'organization_name: "My New Charity"' },
      { id: 21, lane: 'Flow', title: 'sign-up.signupNonprofit', description: 'EXECUTE: Create Org Record' },
      { id: 22, lane: 'API', title: 'choco.signup', description: 'POST /signup (Create Org)' },
      { id: 23, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'START: KYC Process' },
    ],
  },
  {
    id: '7',
    name: 'Story 7: Phone Issue (IL)',
    background: 'Israeli user, invalid phone for gateway. Flow: Login → KYC Resume → Gateway Setup → Phone Error → Correction.',
    initialPrompt: 'Setting up gateway with bad phone number.',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"I want to finish my setup"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'Analyze Intent' },
      { id: 3, lane: 'Flow', title: 'login.bootstrapAutoFillIdentifier', description: 'CHECK: Auto-fill (Session)' },
      { id: 4, lane: 'API', title: 'choco.login-complete', description: 'POST /login-complete (Re-hydrate)' },
      { id: 5, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'RESUME: KYC Process' },
      { id: 6, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'START: Gateway Discovery' },
      { id: 7, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'MATCH: Meshulam/Grow' },
      { id: 8, lane: 'Flow', title: 'kyc.kycMeshulamPhone', description: 'ASK: Local Phone' },
      { id: 9, lane: 'Agent', title: 'Request Phone', description: '"Need IL phone (05X...)"' },
      { id: 10, lane: 'User', title: 'Provide Phone', description: '"972501234567" (Invalid)' },
      { id: 11, lane: 'Data', title: 'Update Context', description: 'meshulam_phone_local: "972501234567"' },
      { id: 12, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'RETRY: Discovery with Phone' },
      { id: 13, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'ERROR: MESHULAM_INVALID_PHONE' },
      { id: 14, lane: 'Flow', title: 'kyc.kycMeshulamPhone', description: 'HANDLE: Catch Error & Retry' },
      { id: 15, lane: 'Agent', title: 'Retry', description: '"Format invalid. Please use 05X format."' },
      { id: 16, lane: 'User', title: 'Provide Correct', description: '"0501234567"' },
      { id: 17, lane: 'Data', title: 'Update Context', description: 'meshulam_phone_local: "0501234567"' },
      { id: 18, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'SUCCESS: Gateway Matched' },
    ],
  },
  {
    id: '8',
    name: 'Story 8: Multi-Entity Org',
    background: 'Org with multiple entities. Flow: Login -> KYC -> Entity Selection → Attach Gateway.',
    initialPrompt: 'I have multiple legal entities for my org.',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"Setup my payment gateway"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'Analyze Intent' },
      { id: 3, lane: 'Flow', title: 'login.checkAccountStatus', description: 'CHECK: Full Login (Summarized)' },
      { id: 4, lane: 'Data', title: 'Context Load', description: 'Has 2 Entities. No Gateway.' },
      { id: 5, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'START: KYC Process' },
      { id: 6, lane: 'Flow', title: 'kyc.kycGatewayIntroduction', description: 'INTRO: Gateway Setup' },
      { id: 7, lane: 'Flow', title: 'kyc.kycLoadEntities', description: 'FETCH: Entities' },
      { id: 8, lane: 'API', title: 'kyc.loadOrgEntities', description: 'GET /orgs/:id/entities (Returns 2)' },
      { id: 9, lane: 'Flow', title: 'kyc.kycEntityDecision', description: 'DECIDE: Select Entity' },
      { id: 10, lane: 'Flow', title: 'kyc.kycSelectEntity', description: 'ASK: Which Entity?' },
      { id: 11, lane: 'Agent', title: 'Select Entity', description: '"Which entity needs a gateway? (A or B)"' },
      { id: 12, lane: 'User', title: 'Select', description: '"Entity A"' },
      { id: 13, lane: 'Data', title: 'Update Context', description: 'entity_selection: "Entity A"' },
      { id: 14, lane: 'Flow', title: 'kyc.kycProcessEntitySelection', description: 'RESOLVE: Entity ID' },
      { id: 15, lane: 'API', title: 'kyc.resolveEntitySelection', description: 'Map Name to ID' },
      { id: 16, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'MATCH: Find Provider' },
    ],
  },
  {
    id: '9',
    name: 'Story 9: Login No Account',
    background: 'Login intent, no account. Flow: Login → NO_SUCH_USER → Offer Retry/Signup → Transition to Onboarding.',
    initialPrompt: 'I want to login (but do not exist).',
    steps: [
      { id: 1, lane: 'User', title: 'Login Intent', description: '"I want to log in"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'Analyze Intent: Login' },
      { id: 3, lane: 'Flow', title: 'login.collectLoginDetails', description: 'START: Collect Identifier' },
      { id: 4, lane: 'Agent', title: 'Request Info', description: '"Enter email/phone"' },
      { id: 5, lane: 'User', title: 'Provide Info', description: '"unknown@example.com"' },
      { id: 6, lane: 'Data', title: 'Update Context', description: 'login_identifier: "unknown@example.com"' },
      { id: 7, lane: 'Flow', title: 'login.sendLoginOTP', description: 'START: OTP Sequence' },
      { id: 8, lane: 'API', title: 'choco.login-otp', description: 'ERROR: USER_NOT_FOUND' },
      { id: 9, lane: 'Flow', title: 'login.loginNotFoundOptions', description: 'HANDLE: User Not Found' },
      { id: 10, lane: 'Agent', title: 'Offer Retry', description: '"Account not found. Retry or Signup?"' },
      { id: 11, lane: 'User', title: 'Choose Signup', description: '"Signup"' },
      { id: 12, lane: 'Data', title: 'Update Context', description: 'auth_next_step: "signup"' },
      { id: 13, lane: 'Flow', title: 'login.handoffToSignup', description: 'SWITCH: Handoff to Signup' },
      { id: 14, lane: 'API', title: 'login.transitionToSignUp', description: 'Switch Flow Engine State' },
      { id: 15, lane: 'Flow', title: 'sign-up.intent', description: 'START: Signup Flow' },
    ],
  },
  {
    id: '10',
    name: 'Story 10: French Nonprofit',
    background: 'French nonprofit. Flow: Signup -> KYC Entity → Check Country (FR) → Manual Entry (No Lookup).',
    initialPrompt: 'I am a French nonprofit.',
    steps: [
      { id: 1, lane: 'User', title: 'Start', description: '"I am a French nonprofit"' },
      { id: 2, lane: 'Flow', title: 'welcome.intent', description: 'DECIDE: New Registration' },
      { id: 3, lane: 'Flow', title: 'sign-up.intent', description: 'DECIDE: Role = Nonprofit' },
      { id: 4, lane: 'Flow', title: 'sign-up.collectNonprofitProfile', description: 'START: Collect Profile' },
      { id: 5, lane: 'Flow', title: 'sign-up.signupNonprofit', description: 'EXECUTE: Create User' },
      { id: 6, lane: 'Flow', title: 'kyc.kycBootstrap', description: 'START: KYC Process' },
      { id: 7, lane: 'Flow', title: 'kyc.kycCreateEntityStart', description: 'START: Create Entity' },
      { id: 8, lane: 'Agent', title: 'Request Country', description: '"Entity Name and Country?"' },
      { id: 9, lane: 'User', title: 'Provide Info', description: '"La Charité, France"' },
      { id: 10, lane: 'Data', title: 'Update Context', description: 'entity_country: "FR"' },
      { id: 11, lane: 'Flow', title: 'kyc.kycEntityMissingDetails', description: 'MANUAL: Collect Foreign Details' },
      { id: 12, lane: 'Agent', title: 'Manual Entry', description: '"Provide Tax ID and Address"' },
      { id: 13, lane: 'User', title: 'Provide Data', description: 'User provides details' },
      { id: 14, lane: 'Flow', title: 'kyc.kycCreateEntityFinalize', description: 'BUILD: Construct Entity Object' },
      { id: 15, lane: 'API', title: 'kyc.buildEntity', description: 'Construct Object (FR)' },
      { id: 16, lane: 'Flow', title: 'kyc.kycPaymentGatewayDiscovery', description: 'MATCH: Find Provider' },
      { id: 17, lane: 'API', title: 'kyc.handleGatewayDiscovery', description: 'Match: Stripe' },
    ],
  },
];
